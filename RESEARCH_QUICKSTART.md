# Sovereign Research Module - Quick Start

## Enable the Module

Edit `config.toml`:

```toml
# Sovereign Research Module (New multi-source system with rich provenance)
enable_autonomous_research = true  # Change to true
```

## How It Works

1. **TinyLlama generates curiosities** during conversations
2. **Every 30 seconds** (background pulse), the scheduler checks curiosities
3. **High-urgency or aged curiosities** trigger research
4. **Multi-source routing**:
   - Medical/scientific queries â†’ Enhanced biomedical search
   - Everything else â†’ General web search
5. **Results stored as memories** with full provenance:
   - Source: "DuckDuckGo" or "DuckDuckGo (Biomedical)"
   - Original query preserved
   - Timestamp recorded
   - Confidence score (0.70-0.75)

## Example

**User asks**: "Tell me about photosynthesis efficiency"

**TinyLlama generates curiosity**: "What is the efficacy of photosynthesis?"

**System detects**: "efficacy" â†’ biomedical keyword â†’ routes to BiomedicalSource

**Search result**: Enhanced DuckDuckGo query with medical context

**Memory created**:
```
Autonomous Research:
Query: What is the efficacy of photosynthesis?
Answer: Photosynthesis efficiency varies by plant species...

[Source: DuckDuckGo (Biomedical) | Confidence: 70%]
```

**Provenance**: Full metadata stored in `MemorySource::Researched`

## Key Features

âœ… **100% Free**: DuckDuckGo API - no costs, no rate limits, no API keys
âœ… **Smart Routing**: Detects 30+ biomedical keywords
âœ… **Provenance**: Every fact has a source, query, and timestamp
âœ… **Deduplication**: Won't research the same thing twice
âœ… **Urgency-Based**: High-priority curiosities researched first
âœ… **Context-Aware**: Uses conversation context for decisions

## Testing

Run tests:
```bash
cargo test --bin vi3
```

All 65 tests pass, including:
- Research scheduler logic
- Biomedical detection
- Source routing
- Duplicate tracking

## Build

Development:
```bash
cargo build
```

Release (optimized):
```bash
cargo build --release
```

## Monitoring

Watch logs for:
- `ðŸ”¬ Sovereign Research Module enabled` - System initialized
- `ðŸ”¬ Researching curiosity (urgency: X.XX): ...` - Research triggered
- `âœ… Research complete: N results for '...'` - Research finished
- `ðŸ”¬ Sovereign research complete` - Memories stored

## Biomedical Keywords Detected

The system automatically routes these keywords to biomedical search:
- trial, study, efficacy, clinical, patient, dose, therapy
- disease, syndrome, drug, medicine, medical, diagnosis, treatment
- symptom, cancer, virus, bacteria, infection, pharmaceutical
- prescription, biochemistry, neurology, cardiology, epidemiology
- pathology, anatomy, physiology, pharmacology

## Legacy System

The old curiosity search still works if you prefer:

```toml
enable_curiosity_search = true  # Legacy system
enable_autonomous_research = false  # New system
```

But the new system is recommended for better provenance tracking.

## Troubleshooting

**No research happening?**
- Check `enable_autonomous_research = true` in config.toml
- Ensure VI has active curiosities (generated by TinyLlama)
- Wait for background pulse cycle (~30 seconds)

**Wrong source routing?**
- Check query for biomedical keywords
- Queries without keywords use general web source
- Both sources work, just different confidence levels

**Memory not appearing?**
- Research results are stored in the memory system
- Check logs for "Research complete" messages
- Memories have MemoryType::Curiosity

## Architecture Files

- `src/tools/knowledge.rs` - Multi-source knowledge tool
- `src/research_scheduler.rs` - Intelligent scheduler
- `src/types.rs` - MemorySource::Researched provenance
- `src/consciousness.rs` - Integration into background pulse

---

**Ready to use!** Just set `enable_autonomous_research = true` and restart VI.

